window.yii.easyuiLogin=function(c){var e,d,b,f;return{isActive:!1,init:function(){window.localStorage.removeItem("token");c("#login-dialog").dialog({title:yii.easyuiLogin.dialogTitle,width:window.innerWidth<yii.easyuiLogin.dialogWidth?window.innerWidth-10:yii.easyuiLogin.dialogWidth,height:yii.easyuiLogin.dialogHeight,content:yii.easyuiLogin.content,closable:!1,minimizable:!1,maximizable:!1,collapsible:!1,draggable:!1,resizable:!1,iconCls:"icon-lock",toolbar:yii.easyuiLogin.header,buttons:"#login-btn"});
e=c(yii.easyuiLogin.usernameSelector);d=c("#loginform-password");b=c("#login-form");f=c("#login-btn-ok");e.textbox({prompt:"Username",required:1,fit:!0}).textbox("textbox").bind("keydown",function(a){13===a.keyCode&&b.form("submit");a.stopPropagation()});e.textbox("textbox").attr("autocomplete","on");d.passwordbox({prompt:"Password",required:1,fit:!0}).passwordbox("textbox").bind("keydown",function(a){13===a.keyCode&&b.form("submit");a.stopPropagation()});b.form({url:yii.easyuiLogin.url,novalidate:!0,
onSubmit:function(){c(this).form("enableValidation");if(!c(this).form("validate"))return!1;f.linkbutton({text:"Login...",disabled:!0})},success:function(a){a=JSON.parse(a);try{if(a.data)for(var b in a.data)window.localStorage.setItem(b,a.data[b])}catch(h){c.messager.alert("Application","Application no support storage, maybe you run in private mode browser.","error")}if(a.redirect)window.location=a.redirect;else if(f.linkbutton({text:"Login",disabled:!1}),a.loginerror){b="";for(var d in a.loginerror)if("object"===
typeof a.loginerror[d])for(var g in a.loginerror[d])b+=a.loginerror[d][g];c.messager.alert("Login",b,"error");e.textbox("textbox").focus()}},error:function(){f.linkbutton({text:"Login"})}});f.linkbutton({iconCls:"icon-ok",text:"Login",onClick:function(){b.form("submit")}});c("#login-btn-reset").linkbutton({iconCls:"icon-cancel",text:"Reset",onClick:function(){e.textbox({value:""});d.passwordbox({value:""})}});e.textbox("clear").textbox("textbox").focus()},content:""}}(window.jQuery);